name: Git CTF Level Î© Validator
on: [push]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout full history
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Essential: Gets all commits
          fetch-tags: true

      - name: Fix branch visibility
        run: |
          # This forces the runner to see all remote branches as 'origin/branch'
          git remote set-branches origin '*'
          git fetch origin --quiet

      - name: Make validator executable
        run: chmod +x validate.sh

      - name: Run validation
        run: ./validate.sh
