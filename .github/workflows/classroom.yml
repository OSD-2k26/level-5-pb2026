name: Git CTF Level Î© Validator

on:
  push:

jobs:
  validate:
    runs-on: ubuntu-latest
    timeout-minutes: 2

    steps:
      - name: Checkout repository (full history)
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Fetch all remote branches
        run: git fetch --all --prune

      - name: Create local branches from origin/*
        run: |
          for b in alpha beta gamma; do
            if git show-ref --verify --quiet refs/remotes/origin/$b; then
              git branch $b origin/$b || true
            fi
          done
          git branch -a

      - name: Make validator executable
        run: chmod +x validate.sh

      - name: Run validation
        run: ./validate.sh
